<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
      
    

    
  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Courier New:300,300italic,400,400italic,700,700italic|Georgia:300,300italic,400,400italic,700,700italic|Palatino:300,300italic,400,400italic,700,700italic|Arial:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png?v=5.1.4">


  <link rel="mask-icon" href="/images/favicon.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Linux,Command-line,sed," />




  


  <link rel="alternate" href="/atom.xml" title="Jiarui Lu" type="application/atom+xml" />






<meta name="description" content="sed is a streaming text command-line tool in Linux and Mac OS(a little bit different). It can work perfect with RE to finish the operation of one or more than one text file, including delete, replace,">
<meta property="og:type" content="article">
<meta property="og:title" content="How to use sed in Linux?">
<meta property="og:url" content="http://jaredlujr.github.io/2020/03/27/command-sed/index.html">
<meta property="og:site_name" content="Jiarui Lu">
<meta property="og:description" content="sed is a streaming text command-line tool in Linux and Mac OS(a little bit different). It can work perfect with RE to finish the operation of one or more than one text file, including delete, replace,">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-03-27T14:30:31.000Z">
<meta property="article:modified_time" content="2020-04-03T08:30:37.789Z">
<meta property="article:author" content="Jiarui Lu">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Command-line">
<meta property="article:tag" content="sed">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: 'KV6M2IMYAC',
      apiKey: 'e963419de387ecf89ab76ca23cabaeed',
      indexName: 'jaredblog',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://jaredlujr.github.io/2020/03/27/command-sed/"/>





  <title>How to use sed in Linux? | Jiarui Lu</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-162026662-1', 'auto');
  ga('send', 'pageview');
</script>





<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jiarui Lu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">Non-Stop</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-project">
          <a href="https://github.com/jaredlujr/" target="_blank" rel="section noopener">
            
            project
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jaredlujr.github.io/2020/03/27/command-sed/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiarui Lu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/profile1.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jiarui Lu">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">How to use sed in Linux?</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-27T22:30:31+08:00">
                2020-03-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/computer-science/" itemprop="url" rel="index">
                    <span itemprop="name">Computer-science</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/03/27/command-sed/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2020/03/27/command-sed/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2020/03/27/command-sed/" class="leancloud_visitors" data-flag-title="How to use sed in Linux?">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><strong>sed</strong> is a streaming text command-line tool in Linux and Mac OS(a little bit different). It can work perfect with RE to finish the operation of one or more than one text file, including delete, replace, insert and so on.</p>
<h2 id="Patterns"><a href="#Patterns" class="headerlink" title="Patterns"></a>Patterns</h2><h3 id="Command-template"><a href="#Command-template" class="headerlink" title="Command template"></a>Command template</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed [options] <span class="string">'command'</span> file(s)</span><br><span class="line">sed [options] -f scriptfile file(s)</span><br><span class="line">sed -h : to display the helper doc</span><br></pre></td></tr></table></figure>
<h3 id="Input-arguments"><a href="#Input-arguments" class="headerlink" title="Input arguments"></a>Input arguments</h3><p>File: filename(s) in system</p>
<h3 id="Command-parameters"><a href="#Command-parameters" class="headerlink" title="Command parameters"></a>Command parameters</h3><p>(<em>frequently used ones are listed below</em>)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a\ <span class="comment"># insert downward, relatively</span></span><br><span class="line">i\ <span class="comment"># insert upward, relatively</span></span><br><span class="line">d  <span class="comment"># delete</span></span><br><span class="line">s  <span class="comment"># replace</span></span><br><span class="line">h  <span class="comment"># copy the content to buffer</span></span><br><span class="line">g  <span class="comment"># use stuffs in buffer to replace</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Replace-flags"><a href="#Replace-flags" class="headerlink" title="Replace flags"></a>Replace flags</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">g <span class="comment"># all-replace in line</span></span><br><span class="line">p <span class="comment"># print the line</span></span><br><span class="line">w <span class="comment"># write the line into a file</span></span><br><span class="line">x <span class="comment"># swap the text with the buffer</span></span><br></pre></td></tr></table></figure>
<h3 id="Metacharacter-set"><a href="#Metacharacter-set" class="headerlink" title="Metacharacter set"></a>Metacharacter set</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">^ <span class="comment"># match the beginning of line</span></span><br><span class="line">$ <span class="comment"># match the ending of line</span></span><br><span class="line">. <span class="comment"># match a non-new-line arbitrary character</span></span><br><span class="line">* <span class="comment"># match 0 or more character</span></span><br><span class="line">[] <span class="comment"># match a range of characters</span></span><br><span class="line">[^] <span class="comment"># match characters beyond the range</span></span><br><span class="line">\(..\) <span class="comment"># match substring and keep</span></span><br><span class="line">&amp; <span class="comment"># keep target character and replace the &amp;</span></span><br><span class="line">\&lt; <span class="comment"># match the beginning of word</span></span><br><span class="line">\&gt; <span class="comment"># match the ending of word</span></span><br></pre></td></tr></table></figure>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/^sed/ <span class="comment"># -&gt; "sedimentation ..."</span></span><br><span class="line">/sed$/ <span class="comment"># -&gt; ".... sed"</span></span><br><span class="line">/s.d/ <span class="comment"># -&gt; "sad"</span></span><br><span class="line">/*sed/ <span class="comment"># -&gt; "    sed"</span></span><br><span class="line">[] <span class="comment"># /[ss]ed/ -&gt; "sed" or "Sed"</span></span><br><span class="line">[^] <span class="comment"># /[^A-RT-Z]ed/ "Sed"</span></span><br><span class="line">\(..\) <span class="comment"># s/\(love\)able/\1rsï¼Œloveable -&gt; lovers</span></span><br><span class="line">&amp; <span class="comment"># s/love/ **&amp;** / "love"-&gt; "**love**"</span></span><br><span class="line">\&lt; <span class="comment"># /\&lt;love/ -&gt; "loveable" or "lovelorn"</span></span><br><span class="line">\&gt; <span class="comment"># /love\&gt;/ -&gt; "nolove"</span></span><br></pre></td></tr></table></figure>
<h2 id="Usage-instances"><a href="#Usage-instances" class="headerlink" title="Usage instances"></a>Usage instances</h2><h3 id="replacing-s"><a href="#replacing-s" class="headerlink" title="replacing: s"></a>replacing: s</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/book/books/'</span> file</span><br><span class="line"></span><br><span class="line">sed -n <span class="string">'s/test/TEST/p'</span> file <span class="comment"># only matched lines are printed out</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">'s/book/books/g'</span> file <span class="comment"># directly editing the files without display</span></span><br></pre></td></tr></table></figure>
<h3 id="all-replacing-g"><a href="#all-replacing-g" class="headerlink" title="all-replacing: g"></a>all-replacing: g</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/book/books/g'</span> file</span><br><span class="line"></span><br><span class="line"><span class="comment"># if we want replacing happens from Nth match</span></span><br><span class="line"><span class="built_in">echo</span> sksksksksksk | sed <span class="string">'s/sk/SK/2g'</span></span><br><span class="line">skSKSKSKSKSK</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> sksksksksksk | sed <span class="string">'s/sk/SK/3g'</span></span><br><span class="line">skskSKSKSKSK</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> sksksksksksk | sed <span class="string">'s/sk/SK/4g'</span></span><br><span class="line">skskskSKSKSK</span><br></pre></td></tr></table></figure>
<h3 id="delimiter-and-so-on"><a href="#delimiter-and-so-on" class="headerlink" title="delimiter: / : | and so on"></a>delimiter: / : | and so on</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/test/TEXT/g'</span></span><br><span class="line">sed <span class="string">'s:test:TEXT:g'</span></span><br><span class="line">sed <span class="string">'s|test|TEXT|g'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># escaping when we need their happening</span></span><br><span class="line">sed <span class="string">'s/\/bin/\/usr\/local\/bin/g'</span></span><br></pre></td></tr></table></figure>
<h3 id="delete-d"><a href="#delete-d" class="headerlink" title="delete: d"></a>delete: d</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/^$/d'</span> file <span class="comment"># delete empty lines</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'2d'</span> file <span class="comment"># delete 2nd line</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'2,$d'</span> file <span class="comment"># delete 2nd line to end</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'$d'</span> file <span class="comment"># delete end line</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'/^test/'</span>d file <span class="comment"># delete line with 'test' as beginning</span></span><br></pre></td></tr></table></figure>
<h3 id="choosing-target-lines"><a href="#choosing-target-lines" class="headerlink" title="choosing target lines: ,"></a>choosing target lines: ,</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'/test/,/check/p'</span> file <span class="comment"># prints lines from test and check</span></span><br><span class="line"></span><br><span class="line">sed -n <span class="string">'5,/^test/p'</span> file <span class="comment"># print from 5th line to the first line with beginning as 'text'</span></span><br></pre></td></tr></table></figure>
<h3 id="multiple-command-e"><a href="#multiple-command-e" class="headerlink" title="multiple command: e"></a>multiple command: e</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e <span class="string">'1,5d'</span> -e <span class="string">'s/test/check/'</span> file <span class="comment"># perform double operations to each line</span></span><br></pre></td></tr></table></figure>
<h3 id="write-into-file-w"><a href="#write-into-file-w" class="headerlink" title="write into file: w"></a>write into file: w</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'/test/w outfile'</span> example</span><br></pre></td></tr></table></figure>
<h3 id="add-downward-a"><a href="#add-downward-a" class="headerlink" title="add(downward): a"></a>add(downward): a</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/^test/a\this is a test line'</span> file</span><br></pre></td></tr></table></figure>
<h3 id="insert-upward-i"><a href="#insert-upward-i" class="headerlink" title="insert(upward): i"></a>insert(upward): i</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/^test/i\this is a test line'</span> file <span class="comment"># before the lines with beginning as 'test'</span></span><br></pre></td></tr></table></figure>
<h3 id="Other-common-usage"><a href="#Other-common-usage" class="headerlink" title="Other common usage"></a>Other common usage</h3><h4 id="keep-matched"><a href="#keep-matched" class="headerlink" title="keep matched"></a>keep matched</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> this is a <span class="built_in">test</span> line | sed <span class="string">'s/\w\+/[&amp;]/g'</span> <span class="comment"># match each word and add brackets</span></span><br><span class="line">[this] [is] [a] [<span class="built_in">test</span>] [line]</span><br><span class="line"></span><br><span class="line">sed <span class="string">'s/^192.168.0.1/&amp;localhost/'</span> file</span><br><span class="line">192.168.0.1localhost</span><br></pre></td></tr></table></figure>
<h4 id="substring"><a href="#substring" class="headerlink" title="substring"></a>substring</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> this is digit 7 <span class="keyword">in</span> a number | sed <span class="string">'s/digit \([0-9]\)/\1/'</span></span><br><span class="line">this is 7 <span class="keyword">in</span> a number</span><br></pre></td></tr></table></figure>
<h4 id="combination"><a href="#combination" class="headerlink" title="combination"></a>combination</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'pattern'</span> | sed <span class="string">'pattern'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># also as:</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'pattern; pattern'</span></span><br></pre></td></tr></table></figure>
<h4 id="quotation"><a href="#quotation" class="headerlink" title="quotation"></a>quotation</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">test</span>=hello</span><br><span class="line"><span class="built_in">echo</span> hello WORLD | sed <span class="string">"s/<span class="variable">$test</span>/HELLO"</span></span><br><span class="line">HELLO WORLD</span><br></pre></td></tr></table></figure>
<h4 id="next"><a href="#next" class="headerlink" title="next"></a>next</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/test/&#123; n; s/aa/bb/; &#125;'</span> file <span class="comment"># if test is matched then perform over the next line</span></span><br></pre></td></tr></table></figure>
<h4 id="quit-break"><a href="#quit-break" class="headerlink" title="quit(break)"></a>quit(break)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'10q'</span> file <span class="comment"># quit sed after print out line 10</span></span><br></pre></td></tr></table></figure>
<h4 id="print-odd-or-even-lines"><a href="#print-odd-or-even-lines" class="headerlink" title="print odd or even lines"></a>print odd or even lines</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'p;n'</span> test.txt  <span class="comment">#odd</span></span><br><span class="line">sed -n <span class="string">'n;p'</span> test.txt  <span class="comment">#even</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># method 2</span></span><br><span class="line"></span><br><span class="line">sed -n <span class="string">'1~2p'</span> test.txt  <span class="comment">#odd</span></span><br><span class="line">sed -n <span class="string">'2~2p'</span> test.txt  <span class="comment">#even</span></span><br></pre></td></tr></table></figure>
<h2 id="Affiliated-tools-under-shell"><a href="#Affiliated-tools-under-shell" class="headerlink" title="Affiliated tools under shell"></a>Affiliated tools under shell</h2><h3 id="Get-all-filenames-as-var-by"><a href="#Get-all-filenames-as-var-by" class="headerlink" title="Get all filenames as var by `"></a>Get all filenames as var by `</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> `ls | grep .jpg`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  newfile=`<span class="built_in">echo</span> <span class="variable">$file</span> | sed <span class="string">'s/dtest/cora/g'</span>`</span><br><span class="line">  mv <span class="variable">$file</span> <span class="variable">$newfile</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<h3 id="String-slice"><a href="#String-slice" class="headerlink" title="String slice"></a>String slice</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="comment">#var&#125; # length of string var</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;alpha:3&#125;</span> <span class="comment"># display rest after first 3 chars</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;alpha:3:4&#125;</span> <span class="comment"># display 4 chars after first 3 chars</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;alpha: -3&#125;</span> <span class="comment"># display the last 3</span></span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/linux/" rel="tag"># Linux</a>
          
            <a href="/tags/command-line/" rel="tag"># Command-line</a>
          
            <a href="/tags/sed/" rel="tag"># sed</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/03/26/2020-03-26-stirling1/" rel="next" title="Counting the number of permutations">
                <i class="fa fa-chevron-left"></i> Counting the number of permutations
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/03/29/policy-iteration/" rel="prev" title="Policy iteration by dynamic programming">
                Policy iteration by dynamic programming <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  




        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/profile1.png"
                alt="Jiarui Lu" />
            
              <p class="site-author-name" itemprop="name">Jiarui Lu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">51</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">52</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/jaredlujr" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:jaredlujr@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/jaredlujr" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Patterns"><span class="nav-number">1.</span> <span class="nav-text">Patterns</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Command-template"><span class="nav-number">1.1.</span> <span class="nav-text">Command template</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Input-arguments"><span class="nav-number">1.2.</span> <span class="nav-text">Input arguments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Command-parameters"><span class="nav-number">1.3.</span> <span class="nav-text">Command parameters</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Replace-flags"><span class="nav-number">1.4.</span> <span class="nav-text">Replace flags</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Metacharacter-set"><span class="nav-number">1.5.</span> <span class="nav-text">Metacharacter set</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example"><span class="nav-number">1.5.1.</span> <span class="nav-text">Example</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Usage-instances"><span class="nav-number">2.</span> <span class="nav-text">Usage instances</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#replacing-s"><span class="nav-number">2.1.</span> <span class="nav-text">replacing: s</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#all-replacing-g"><span class="nav-number">2.2.</span> <span class="nav-text">all-replacing: g</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#delimiter-and-so-on"><span class="nav-number">2.3.</span> <span class="nav-text">delimiter: &#x2F; : | and so on</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#delete-d"><span class="nav-number">2.4.</span> <span class="nav-text">delete: d</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#choosing-target-lines"><span class="nav-number">2.5.</span> <span class="nav-text">choosing target lines: ,</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#multiple-command-e"><span class="nav-number">2.6.</span> <span class="nav-text">multiple command: e</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#write-into-file-w"><span class="nav-number">2.7.</span> <span class="nav-text">write into file: w</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#add-downward-a"><span class="nav-number">2.8.</span> <span class="nav-text">add(downward): a</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#insert-upward-i"><span class="nav-number">2.9.</span> <span class="nav-text">insert(upward): i</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Other-common-usage"><span class="nav-number">2.10.</span> <span class="nav-text">Other common usage</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#keep-matched"><span class="nav-number">2.10.1.</span> <span class="nav-text">keep matched</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#substring"><span class="nav-number">2.10.2.</span> <span class="nav-text">substring</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#combination"><span class="nav-number">2.10.3.</span> <span class="nav-text">combination</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#quotation"><span class="nav-number">2.10.4.</span> <span class="nav-text">quotation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#next"><span class="nav-number">2.10.5.</span> <span class="nav-text">next</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#quit-break"><span class="nav-number">2.10.6.</span> <span class="nav-text">quit(break)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#print-odd-or-even-lines"><span class="nav-number">2.10.7.</span> <span class="nav-text">print odd or even lines</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Affiliated-tools-under-shell"><span class="nav-number">3.</span> <span class="nav-text">Affiliated tools under shell</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Get-all-filenames-as-var-by"><span class="nav-number">3.1.</span> <span class="nav-text">Get all filenames as var by &#96;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#String-slice"><span class="nav-number">3.2.</span> <span class="nav-text">String slice</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2020/02/25 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jiarui Lu</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>








        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://jaredlublog.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://jaredlujr.github.io/2020/03/27/command-sed/';
          this.page.identifier = '2020/03/27/command-sed/';
          this.page.title = 'How to use sed in Linux?';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://jaredlublog.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  














  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.4"></script>



  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("aD39KMm6VV9WHCqHgGem30d0-gzGzoHsz", "xGgboJIt3rSrHMBObxPGFDgF");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML"></script>
  


  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.4"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.4"></script>


  

</body>
</html>
